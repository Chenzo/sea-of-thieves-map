!function(e){var t={};function r(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(o,n,function(t){return e[t]}.bind(null,n));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){e.exports=r(6)},function(e,t){window.updateQueryStringParam=function(e,t){var r=[location.protocol,"//",location.host,location.pathname].join(""),o=document.location.search,n=e+"="+t,a="?"+n;if(o){var i=new RegExp("([?&])"+e+"[^&]*"),s=new RegExp("([?&])"+e+"=[^&;]+[&;]?");a=void 0===t||null==t||""==t?(a=o.replace(s,"$1")).replace(/[&;]$/,""):null!==o.match(i)?o.replace(i,"$1"+n):o+"&"+n}a="?"==a?"":a;var l=window.location.hash;window.history.replaceState({},"",r+a+l)},window.websafe=function(e){return e.match(/[a-zA-Z0-9]+/g).join("-").toLowerCase()},window.angle=function(e,t,r,o){var n=o-t,a=r-e;return Math.atan2(n,a)*(180/Math.PI)},window.angle360=function(e,t,r,o){var n=angle(e,t,r,o);return n<0&&(n=360+n),n},window.getCardinalFromDeg=function(e){var t=langDictionnary.COMPASS_NORTH;return e>=0&&11.25>e?t=langDictionnary.COMPASS_NORTH:e>=11.25&&33.75>e?t=langDictionnary.COMPASS_NORTH_BY_NORTH_EAST:e>=33.75&&56.25>e?t=langDictionnary.COMPASS_NORTH_EAST:e>=56.25&&78.75>e?t=langDictionnary.COMPASS_EAST_BY_NORTH_EAST:e>=78.75&&101.25>e?t=langDictionnary.COMPASS_EAST:e>=101.25&&123.75>e?t=langDictionnary.COMPASS_EAST_BY_SOUTH_EAST:e>=123.75&&146.25>e?t=langDictionnary.COMPASS_SOUTH_EAST:e>=146.25&&168.75>e?t=langDictionnary.COMPASS_SOUTH_BY_SOUTH_EAST:e>=168.75&&191.25>e?t=langDictionnary.COMPASS_SOUTH:e>=191.25&&213.75>e?t=langDictionnary.COMPASS_SOUTH_BY_SOUTH_WEST:e>=213.75&&236.25>e?t=langDictionnary.COMPASS_SOUTH_WEST:e>=236.25&&258.75>e?t=langDictionnary.COMPASS_WEST_BY_SOUTH_WEST:e>=258.75&&281.25>e?t=langDictionnary.COMPASS_WEST:e>=281.25&&303.75>e?t=langDictionnary.COMPASS_WEST_BY_NORTH_WEST:e>=303.75&&326.25>e?t=langDictionnary.COMPASS_NORTH_WEST:e>=326.25&&348.75>e&&(t=langDictionnary.COMPASS_NORTH_BY_NORTH_WEST),t},window.toggleFullScreen=function(){document.fullScreenElement&&null!==document.fullScreenElement||!document.mozFullScreen&&!document.webkitIsFullScreen?document.documentElement.requestFullScreen?document.documentElement.requestFullScreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():document.documentElement.webkitRequestFullScreen&&document.documentElement.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT):document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen()}},function(e,t,r){(function(e){var o=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),r={},o=0;o<t.length;o++)r[t[o]]=Object.getOwnPropertyDescriptor(e,t[o]);return r},n=/%[sdj%]/g;t.format=function(e){if(!y(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(s(arguments[r]));return t.join(" ")}r=1;for(var o=arguments,a=o.length,i=String(e).replace(n,function(e){if("%%"===e)return"%";if(r>=a)return e;switch(e){case"%s":return String(o[r++]);case"%d":return Number(o[r++]);case"%j":try{return JSON.stringify(o[r++])}catch(e){return"[Circular]"}default:return e}}),l=o[r];r<a;l=o[++r])h(l)||!S(l)?i+=" "+l:i+=" "+s(l);return i},t.deprecate=function(r,o){if(void 0!==e&&!0===e.noDeprecation)return r;if(void 0===e)return function(){return t.deprecate(r,o).apply(this,arguments)};var n=!1;return function(){if(!n){if(e.throwDeprecation)throw new Error(o);e.traceDeprecation?console.trace(o):console.error(o),n=!0}return r.apply(this,arguments)}};var a,i={};function s(e,r){var o={seen:[],stylize:c};return arguments.length>=3&&(o.depth=arguments[2]),arguments.length>=4&&(o.colors=arguments[3]),g(r)?o.showHidden=r:r&&t._extend(o,r),k(o.showHidden)&&(o.showHidden=!1),k(o.depth)&&(o.depth=2),k(o.colors)&&(o.colors=!1),k(o.customInspect)&&(o.customInspect=!0),o.colors&&(o.stylize=l),u(o,e,o.depth)}function l(e,t){var r=s.styles[t];return r?"["+s.colors[r][0]+"m"+e+"["+s.colors[r][1]+"m":e}function c(e,t){return e}function u(e,r,o){if(e.customInspect&&r&&M(r.inspect)&&r.inspect!==t.inspect&&(!r.constructor||r.constructor.prototype!==r)){var n=r.inspect(o,e);return y(n)||(n=u(e,n,o)),n}var a=function(e,t){if(k(t))return e.stylize("undefined","undefined");if(y(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return f(t)?e.stylize(""+t,"number"):g(t)?e.stylize(""+t,"boolean"):h(t)?e.stylize("null","null"):void 0}(e,r);if(a)return a;var i=Object.keys(r),s=function(e){var t={};return i.forEach(function(e,r){t[e]=!0}),t}();if(e.showHidden&&(i=Object.getOwnPropertyNames(r)),w(r)&&(i.indexOf("message")>=0||i.indexOf("description")>=0))return p(r);if(0===i.length){if(M(r)){var l=r.name?": "+r.name:"";return e.stylize("[Function"+l+"]","special")}if(L(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(v(r))return e.stylize(Date.prototype.toString.call(r),"date");if(w(r))return p(r)}var c,S="",N=!1,T=["{","}"];return m(r)&&(N=!0,T=["[","]"]),M(r)&&(S=" [Function"+(r.name?": "+r.name:"")+"]"),L(r)&&(S=" "+RegExp.prototype.toString.call(r)),v(r)&&(S=" "+Date.prototype.toUTCString.call(r)),w(r)&&(S=" "+p(r)),0!==i.length||N&&0!=r.length?o<0?L(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special"):(e.seen.push(r),c=N?function(e,t,r,o,n){for(var a=[],i=0,s=t.length;i<s;++i)O(t,String(i))?a.push(d(e,t,r,o,String(i),!0)):a.push("");return n.forEach(function(n){n.match(/^\d+$/)||a.push(d(e,t,r,o,n,!0))}),a}(e,r,o,s,i):i.map(function(t){return d(e,r,o,s,t,N)}),e.seen.pop(),function(e,t,r){return e.reduce(function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}(c,S,T)):T[0]+S+T[1]}function p(e){return"["+Error.prototype.toString.call(e)+"]"}function d(e,t,r,o,n,a){var i,s,l;if((l=Object.getOwnPropertyDescriptor(t,n)||{value:t[n]}).get?s=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(s=e.stylize("[Setter]","special")),O(o,n)||(i="["+n+"]"),s||(e.seen.indexOf(l.value)<0?(s=h(r)?u(e,l.value,null):u(e,l.value,r-1)).indexOf("\n")>-1&&(s=a?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")):s=e.stylize("[Circular]","special")),k(i)){if(a&&n.match(/^\d+$/))return s;(i=JSON.stringify(""+n)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(i=i.substr(1,i.length-2),i=e.stylize(i,"name")):(i=i.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),i=e.stylize(i,"string"))}return i+": "+s}function m(e){return Array.isArray(e)}function g(e){return"boolean"==typeof e}function h(e){return null===e}function f(e){return"number"==typeof e}function y(e){return"string"==typeof e}function k(e){return void 0===e}function L(e){return S(e)&&"[object RegExp]"===N(e)}function S(e){return"object"==typeof e&&null!==e}function v(e){return S(e)&&"[object Date]"===N(e)}function w(e){return S(e)&&("[object Error]"===N(e)||e instanceof Error)}function M(e){return"function"==typeof e}function N(e){return Object.prototype.toString.call(e)}function T(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(r){if(k(a)&&(a=e.env.NODE_DEBUG||""),r=r.toUpperCase(),!i[r])if(new RegExp("\\b"+r+"\\b","i").test(a)){var o=e.pid;i[r]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",r,o,e)}}else i[r]=function(){};return i[r]},t.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=m,t.isBoolean=g,t.isNull=h,t.isNullOrUndefined=function(e){return null==e},t.isNumber=f,t.isString=y,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=k,t.isRegExp=L,t.isObject=S,t.isDate=v,t.isError=w,t.isFunction=M,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=r(4);var b=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function O(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",function(){var e=new Date,t=[T(e.getHours()),T(e.getMinutes()),T(e.getSeconds())].join(":");return[e.getDate(),b[e.getMonth()],t].join(" ")}(),t.format.apply(t,arguments))},t.inherits=r(5),t._extend=function(e,t){if(!t||!S(t))return e;for(var r=Object.keys(t),o=r.length;o--;)e[r[o]]=t[r[o]];return e};var A="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function x(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(A&&e[A]){var t;if("function"!=typeof(t=e[A]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,A,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,r,o=new Promise(function(e,o){t=e,r=o}),n=[],a=0;a<arguments.length;a++)n.push(arguments[a]);n.push(function(e,o){e?r(e):t(o)});try{e.apply(this,n)}catch(e){r(e)}return o}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),A&&Object.defineProperty(t,A,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,o(e))},t.promisify.custom=A,t.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function r(){for(var r=[],o=0;o<arguments.length;o++)r.push(arguments[o]);var n=r.pop();if("function"!=typeof n)throw new TypeError("The last argument must be of type Function");var a=this,i=function(){return n.apply(a,arguments)};t.apply(this,r).then(function(t){e.nextTick(i,null,t)},function(t){e.nextTick(x,t,i)})}return Object.setPrototypeOf(r,Object.getPrototypeOf(t)),Object.defineProperties(r,o(t)),r}}).call(this,r(3))},function(e,t){var r,o,n=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(e){r=a}try{o="function"==typeof clearTimeout?clearTimeout:i}catch(e){o=i}}();var l,c=[],u=!1,p=-1;function d(){u&&l&&(u=!1,l.length?c=l.concat(c):p=-1,c.length&&m())}function m(){if(!u){var e=s(d);u=!0;for(var t=c.length;t;){for(l=c,c=[];++p<t;)l&&l[p].run();p=-1,t=c.length}l=null,u=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===i||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}function g(e,t){this.fun=e,this.array=t}function h(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new g(e,t)),1!==c.length||u||s(m)},g.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=h,n.addListener=h,n.once=h,n.off=h,n.removeListener=h,n.removeAllListeners=h,n.emit=h,n.prependListener=h,n.prependOnceListener=h,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},function(e,t,r){"use strict";r.r(t);var o;let n;window.addEventListener("load",function(){function e(e){console.log("online offline update"),navigator.onLine?console.log("went online"):console.log(" went offline")}window.addEventListener("online",e),window.addEventListener("offline",e)}),"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js").then(function(){console.log("Service Worker Registered")}),o=!!navigator.onLine;var a,i=document.querySelector("#install-button");window.addEventListener("beforeinstallprompt",e=>{console.log("beforeinstallprompt - showme!!!"),e.preventDefault(),n=e,document.querySelector("#installBut").classList.add("showme")}),i.addEventListener("click",()=>{document.querySelector("#installBut").classList.remove("showme"),n.prompt(),n.userChoice.then(e=>{"accepted"===e.outcome?console.log("User accepted the A2HS prompt"):console.log("User dismissed the A2HS prompt"),n=null})}),window.addEventListener("appinstalled",e=>{console.log("a2hs","installed")});var s=0,l=0,c=function(e,t){caches.open("sotm-v1.8").then(r=>r.addAll(e.slice(l,l+t))).catch(function(e){console.log("ERROR!?!!!"),console.log(e)}).then(function(){console.log("DONE CACHING: ",l,t,s);var r=0;l==s?(console.log("REALLY REALLY done caching"),a="Install Complete: ",r=100):(l+t>s?(t=s-l,l=s):l+=t,r=l/s*100,c(e,t),a="Installing: "),console.log(r),$(".js-percent").html(a+Math.ceil(r)+"%")}).catch(function(e){console.log("Error Type 4"),console.log(e)})};r(1);const u=r(2);var p=[],d=window.location.pathname.substr(1);console.log("language: "+d);var m=[{loc:[-41.819753270587555,62.927539082707604],islandNameMarkerLoc:[-39.53125,62.75],title:"Lone Cove",type:"île aux trésors",img:"loneCove.jpg",markerAnchorX:40,radius:3,pigs:!0,snakes:!0},{loc:[-69.94175507751075,50.54955884969927],islandNameMarkerLoc:[-66.984375,50.125],title:"Cannon Cove",type:"île aux trésors",img:"cannonCove.jpg",radius:4,chickens:!0,pigs:!0},{loc:[-67.62877065330183,65.30062001780092],islandNameMarkerLoc:[-66.53125,65.265625],title:"Rum Runner Isle",type:"île aux trésors",markerAnchorX:60,radius:2,pigs:!0},{loc:[-80.94564356372827,121.30273506665486],islandNameMarkerLoc:[-79.03125,121.117188],title:"The Crooked Masts",type:"île aux trésors",markerAnchorX:80,radius:3,chickens:!0,snakes:!0},{loc:[-29.006074941430732,18.117840198163094],islandNameMarkerLoc:[-25.484375,18.0625],title:"Sailor's Bounty",type:"île aux trésors",img:"sailorsBounty.jpg",markerAnchorX:60,radius:4,chickens:!0,pigs:!0},{loc:[-21.065393452707312,42.86583042922642],islandNameMarkerLoc:[-17.125,42.625],title:"Smuggler's Bay",type:"île aux trésors",img:"smugglersBay.jpg",markerAnchorX:60,radius:4,chickens:!0,snakes:!0},{loc:[-22.940799321639105,57.487891142156535],islandNameMarkerLoc:[-21.820312,57.453125],title:"Salty Sands",type:"île aux trésors",img:"saltySands.jpg",markerAnchorX:45,radius:1.5,chickens:!0},{loc:[-28.629490743342114,69.55120761078706],islandNameMarkerLoc:[-28.007812,69.53125],title:"Picaroon Palms",type:"île aux trésors",img:"picaroonPalms.jpg",markerAnchorX:60,radius:1.5,snakes:!0},{loc:[-28.19171579987219,88.62081716840055],islandNameMarkerLoc:[-28.19171579987219,88.62081716840055],title:"Scurvy Isley",type:"île aux trésors",img:"scurveyIsley.jpg",radius:1.5},{loc:[-28.691820540241682,107.0555642878491],islandNameMarkerLoc:[-28.691820540241682,107.0555642878491],title:"Old Faithful Isle",type:"île aux trésors",img:"oldFaithfulIsle.jpg",radius:4,chickens:!0,pigs:!0},{loc:[-22.8781029334463,120.48941102991489],islandNameMarkerLoc:[-22.359375,120.21875],title:"Black Sand Atoll",type:"île aux trésors",radius:1.5,snakes:!0},{loc:[-21.566440856402263,136.5557290968507],islandNameMarkerLoc:[-21.566440856402263,136.5557290968507],title:"Marauder's Arch",type:"île aux trésors",radius:3,chickens:!0,pigs:!0},{loc:[-32.44278938865952,32.80535275921895],islandNameMarkerLoc:[-31.570312,32.835938],title:"Sandy Shallows",type:"île aux trésors",img:"sandyShallows.jpg",markerAnchorX:60,radius:1.5,snakes:!0},{loc:[-33.44299886939851,50.23934822463562],islandNameMarkerLoc:[-33.085937,50.296875],title:"Boulder Cay",type:"île aux trésors",img:"boulderCay.jpg",radius:1.5,chickens:!0},{loc:[-45.00792099044309,24.432035940703415],islandNameMarkerLoc:[-43.804687,24.414063],title:"Keel Haul Fort",type:"île aux trésors",img:"keelHaulFort.jpg",markerAnchorX:60,radius:2,isFortress:!0},{loc:[-48.25860180284481,43.931357643687285],islandNameMarkerLoc:[-46.8125,43.8125],title:"Sanctuary Outpost",type:"Avant-poste",img:"sanctuaryOutpost.jpg",markerAnchorX:70,radius:3,outpost:!0},{loc:[-56.135264556210544,57.616119333511065],islandNameMarkerLoc:[-55.546875,57.546875],title:"Lonely Isle",type:"île aux trésors",img:"lonelyIsle.jpg",radius:1.5,snakes:!0},{loc:[-55.3851074456563,71.67579309594387],islandNameMarkerLoc:[-54.21875,71.640625],title:"Hidden Spring Keep",type:"Fort squelette",img:"hiddenSpringKeep.jpg",markerAnchorX:80,radius:2,isFortress:!0},{loc:[-41.13192595693288,114.67807920810932],islandNameMarkerLoc:[-41.13192595693288,114.67807920810932],title:"Blind Man's Lagoon",type:"île aux trésors",radius:1.5,pigs:!0},{loc:[-34.818103609768,126.55069260749704],islandNameMarkerLoc:[-34.818103609768,126.55069260749704],title:"Shark Fin Camp",type:"Fort squelette",img:"sharkFinCamp.jpg",radius:1.5,isFortress:!0},{loc:[-42.195761396643945,137.43053681968217],islandNameMarkerLoc:[-41.453125,137.25],title:"Plunderer's Plight",type:"île aux trésors",img:"plunderOutpost.jpg",markerAnchorX:70,radius:2,pigs:!0},{loc:[-33.56895462527015,144.36651233641732],islandNameMarkerLoc:[-33.56895462527015,144.36651233641732],title:"Black Water Enclave",type:"île aux trésors",radius:1.5,chickens:!0},{loc:[-40.819360494201945,93.80847591354413],islandNameMarkerLoc:[-40.819360494201945,93.80847591354413],title:"Kraken's Watchtower",type:"fort squelette",radius:2,isFortress:!0},{loc:[-54.197162299085946,105.7433527036019],islandNameMarkerLoc:[-54.197162299085946,105.7433527036019],title:"Dagger Tooth Outpost",type:"Avant-poste",img:"daggerToothOutpost.jpg",radius:4,outpost:!0},{loc:[-52.32176952270034,125.36404020139321],islandNameMarkerLoc:[-52.32176952270034,125.36404020139321],title:"The Sunken Grove",type:"île aux trésors",radius:2,pigs:!0,snakes:!0},{loc:[-55.76110247916651,145.1163475274157],islandNameMarkerLoc:[-55.76110247916651,145.1163475274157],title:"Galleon's Grave Outpost",type:"Avant-poste",img:"galleonGraveOutpost.jpg",radius:3,outpost:!0},{loc:[-64.51072835956577,117.43038960965997],islandNameMarkerLoc:[-64.51072835956577,117.43038960965997],title:"Isle of Last Words",type:"île aux trésors",radius:1,pigs:!0,snakes:!0},{loc:[-67.69269774083621,130.11909434410913],islandNameMarkerLoc:[-67.69269774083621,130.11909434410913],title:"Skull Keep",type:"Fort squelette",radius:2,isFortress:!0},{loc:[-71.44348329360741,142.9912651229149],islandNameMarkerLoc:[-71.44348329360741,142.9912651229149],title:"Tri-Rock Isle",type:"île aux trésors",radius:2,chickens:!0},{loc:[-67.50237,151.430381],islandNameMarkerLoc:[-67.50237,151.430381],title:"Three Paces East Seapost",type:"poste en mer",radius:1,isSeapost:!0},{loc:[-59.281311,16.456299],islandNameMarkerLoc:[-50.921875,16.140625],title:"The Spoils of Plenty Store",type:"poste en mer",img:"theSpoilsOfPlentyStore.jpg",markerAnchorX:100,radius:1,isSeapost:!0},{loc:[-75.235017,64.342312],islandNameMarkerLoc:[-74.882812,64.148438],title:"The North Star Seapost",type:"poste en mer",markerAnchorX:90,radius:1,isSeapost:!0},{loc:[-114.96965,94.435731],islandNameMarkerLoc:[-114.476562,94.359375],title:"Stephen's Spoils",type:"poste en mer",img:"stephensSpoils.jpg",markerAnchorX:60,radius:1,isSeapost:!0},{loc:[-128.328685,48.139087],islandNameMarkerLoc:[-127.882812,48.007813],title:"The Finest Trading Post",type:"poste en mer",img:"theFinestTradingPost.jpg",markerAnchorX:90,radius:1,isSeapost:!0},{loc:[-29.844282,120.967678],islandNameMarkerLoc:[-29.844282,120.967678],title:"The Wild Treasures Store",type:"poste en mer",radius:1,isSeapost:!0},{loc:[-80.07029006498121,135.55539947884748],islandNameMarkerLoc:[-79.585937,135.460938],title:"Shiver Retreat",type:"île aux trésors",radius:2,pigs:!0},{loc:[-78.63248893641892,152.05177368081218],islandNameMarkerLoc:[-77.828125,152.039063],title:"Liar's Backbone",type:"île aux trésors",markerAnchorX:60,radius:2,snakes:!0},{loc:[-92.63542166676478,130.11909434410913],islandNameMarkerLoc:[-92.125,130.09375],title:"Shark Tooth Key",type:"île aux trésors",markerAnchorX:70,radius:2,pigs:!0},{loc:[-92.19783001894149,144.99082563224394],islandNameMarkerLoc:[-88.03125,145.015625],title:"Kraken's Fall",type:"île aux trésors",img:"krakenFalls.jpg",radius:4,pigs:!0,snakes:!0},{loc:[-74.94438667929433,102.86928662127767],islandNameMarkerLoc:[-74.94438667929433,102.86928662127767],title:"Shipwreck Bay",type:"île aux trésors",radius:4,chickens:!0,pigs:!0},{loc:[-58.448248980419464,30.371595953863505],islandNameMarkerLoc:[-58.148437,30.359375],title:"Rapier Cay",type:"île aux trésors",img:"rapierCay.jpg",radius:1,chickens:!0},{loc:[-66.31539345270731,15.993498563600905],islandNameMarkerLoc:[-64.015625,16.015625],title:"Crescent Isle",type:"île aux trésors",img:"crescentIsle.jpg",radius:3,pigs:!0,snakes:!0},{loc:[-75.94243588991247,31.746234927654953],islandNameMarkerLoc:[-73.609375,31.96875],title:"Golden Sand Outpost",img:"goldenSandOutpost.jpg",type:"Avant-poste",markerAnchorX:80,radius:3,outpost:!0},{loc:[-81.88115349670785,16.993169376947787],islandNameMarkerLoc:[-81.578125,16.976563],title:"Sea Dog's Rest",type:"île aux trésors",markerAnchorX:60,radius:1.5,pigs:!0},{loc:[-81.6942164761939,60.23384927983136],islandNameMarkerLoc:[-80.8125,60.367188],title:"Twin Groves",type:"île aux trésors",radius:2,chickens:!0},{loc:[-91.6963112835838,48.48771722300551],islandNameMarkerLoc:[-88.015625,48.125],title:"Wanderer's Refuge",type:"île aux trésors",img:"wanderersRefuge.jpg",markerAnchorX:75,radius:4,chickens:!0,snakes:!0},{loc:[-91.44625891339905,30.743560286098365],islandNameMarkerLoc:[-90.65625,30.546875],title:"Lagoon of Whispers",type:"île aux trésors",markerAnchorX:70,radius:2,chickens:!0,snakes:!0},{loc:[-97.13434807797746,16.305895692771806],islandNameMarkerLoc:[-95.234375,16.375],title:"Mermaid's Hideaway",type:"île aux trésors",img:"mermaidsHideaway.jpg",markerAnchorX:80,radius:3,chickens:!0,pigs:!0},{loc:[-105.13603701643558,36.36971243938428],islandNameMarkerLoc:[-104.125,36.53125],title:"Sailor's Knot Stronghold",type:"fort squelette",markerAnchorX:95,radius:2,isFortress:!0},{loc:[-103.69823588787327,72.10794401653528],islandNameMarkerLoc:[-103.429687,72.109375],title:"Fools Lagoon",type:"île aux trésors",radius:1.5,pigs:!0},{loc:[-100.84721297846644,83.52747464057205],islandNameMarkerLoc:[-99.960937,83.578125],title:"Castaway Isle",type:"île aux trésors",img:"castawayIsle.jpg",markerAnchorX:60,radius:1,snakes:!0},{loc:[-104.19511986188078,97.48786124216625],islandNameMarkerLoc:[-103.40625,97.40625],title:"Old Boot Fort",type:"fort squelette",radius:2,isFortress:!0},{loc:[-117.31967471531044,51.7447330135501],islandNameMarkerLoc:[-114.625,51.75],title:"Plunder Valley",type:"île aux trésors",img:"plunderValley.jpg",markerAnchorX:60,radius:4,chickens:!0,pigs:!0},{loc:[-115.8779065452535,69.80542248695795],islandNameMarkerLoc:[-115.109375,69.742188],title:"Chicken Isle",type:"île aux trésors",radius:2,chickens:!0,pigs:!0},{loc:[-115.25277561979163,85.05040239049788],islandNameMarkerLoc:[-114.007812,85],title:"Snake Island",type:"île aux trésors",img:"snakeIsland.jpg",radius:3,pigs:!0,snakes:!0},{loc:[-116.75298510053062,106.67686315627111],islandNameMarkerLoc:[-114.390625,106.546875],title:"Crooks's Hollow",type:"île aux trésors",img:"crooksHollow.jpg",radius:3,chickens:!0,snakes:!0},{loc:[-114.69061602599248,122.1182928219427],islandNameMarkerLoc:[-113.734375,122.015625],title:"Barnacle Cay",type:"île aux trésors",radius:2,chickens:!0},{loc:[-126.31805123958326,134.36426028544201],islandNameMarkerLoc:[-124.414062,133.132813],title:"Ancient Spire Outpost",type:"Avant-poste",img:"ancientSpireOutpost.jpg",markerAnchorX:80,radius:2,outpost:!0},{loc:[-124.56687291042644,34.36631770202399],islandNameMarkerLoc:[-122.59375,33.9375],title:"Discovery Ridge",type:"île aux trésors",markerAnchorX:70,radius:4,chickens:!0,snakes:!0},{loc:[-137.44456997494095,45.05029951966879],islandNameMarkerLoc:[-136.234375,45.046875],title:"Old Salts Atoll",type:"île aux trésors",radius:2,chickens:!0},{loc:[-128.94278938865952,65.35611291577732],islandNameMarkerLoc:[-128.078125,65.234375],title:"Lost Gold Fort",type:"fort squelette",radius:2,isFortress:!0},{loc:[-144.821114895391,60.10784114570619],islandNameMarkerLoc:[-142.5625,60],title:"Shark Bait Cove",type:"île aux trésors",markerAnchorX:"70",radius:4,chickens:!0,pigs:!0},{loc:[-148.3847146692707,73.99154401784801],islandNameMarkerLoc:[-147.46875,73.992188],title:"Lookout Point",type:"île aux trésors",radius:2,pigs:!0},{loc:[-152.51057877731904,84.98792296466371],islandNameMarkerLoc:[-151.757812,84.976563],title:"Booty Isle",type:"île aux trésors",radius:1.5,snakes:!0},{loc:[-134.88188667929433,82.4887459312965],islandNameMarkerLoc:[-133.15625,82.390625],title:"Plunder Outpost",type:"Avant-poste",img:"plunderOutpost.jpg",markerAnchorX:63,radius:2,outpost:!0},{loc:[-126.75507990792053,95.36808708028451],islandNameMarkerLoc:[-125.90625,95.125],title:"Paradise Spring",type:"île aux trésors",radius:2,pigs:!0},{loc:[-133.19392844017779,104.67752152957733],islandNameMarkerLoc:[-132.070312,104.546875],title:"Cutlass Cay",type:"île aux trésors",radius:1.5,snakes:!0},{loc:[-130.13078690541462,117.3608449739159],islandNameMarkerLoc:[-129.078125,116.492188],title:"The Crow's Nest Fortress",type:"fort squelette",img:"theCrowsNestFortress.jpg",markerAnchorX:100,radius:2,isFortress:!0},{loc:[-143.50858871029862,113.17472344302583],islandNameMarkerLoc:[-142.59375,112.21875],title:"Mutineer Rock",type:"île aux trésors",img:"mutineerRock.jpg",radius:2,chickens:!0},{loc:[-143.75864108048336,128.48218277239994],islandNameMarkerLoc:[-141.460937,127.492188],title:"Devil's Ridge",type:"île aux trésors",img:"devilsRidge.jpg",radius:3,pigs:!0,snakes:!0},{loc:[-147.8845051885317,98.80445550116441],islandNameMarkerLoc:[-144.890625,98.859375],title:"Thieves' Haven",type:"île aux trésors",radius:4,chickens:!0,pigs:!0},{loc:[-78.938966,191.556523],islandNameMarkerLoc:[-78.938966,191.556523],title:"Scorched Pass",type:"île aux trésors",radius:2,forsaken:!0},{loc:[-87.003155,200.022485],islandNameMarkerLoc:[-87.003155,200.022485],title:"Brian's Bazaar",type:"poste en mer",radius:1,forsaken:!0,isSeapost:!0},{loc:[-87.5329,177.748416],islandNameMarkerLoc:[-87.5329,177.748416],title:"Fetcher's Rest",type:"île aux trésors",radius:4,forsaken:!0,isSeapost:!1},{loc:[-96.568248,198.610248],islandNameMarkerLoc:[-96.568248,198.610248],title:"Cursewater Shores",type:"île aux trésors",radius:2,forsaken:!0,isSeapost:!1},{loc:[-104.69495,169.682274],islandNameMarkerLoc:[-104.69495,169.682274],title:"Cinder Islet",type:"île aux trésors",radius:2,forsaken:!0,isSeapost:!1},{loc:[-107.257986,185.614528],islandNameMarkerLoc:[-107.257986,185.614528],title:"Flintlock Peninsula",type:"île aux trésors",radius:4,forsaken:!0,isSeapost:!1},{loc:[-119.318876,201.609261],islandNameMarkerLoc:[-119.318876,201.609261],title:"Ruby's Fall",type:"île aux trésors",radius:3,forsaken:!0,isSeapost:!1},{loc:[-118.568719,165.308714],islandNameMarkerLoc:[-118.568719,165.308714],title:"The Forsaken Brink",type:"île aux trésors",radius:1.5,forsaken:!0,isSeapost:!1},{loc:[-127.003365,178.80427],islandNameMarkerLoc:[-127.003365,178.80427],title:"Marrow's Peak Outpost",type:"Avant-poste",radius:3,forsaken:!0,outpost:!0,isSeapost:!1},{loc:[-136.81792,198.36031],islandNameMarkerLoc:[-136.81792,198.36031],title:"Brimstone Rock",type:"île aux trésors",radius:1.5,forsaken:!0,isSeapost:!1},{loc:[-137.943156,212.605619],islandNameMarkerLoc:[-137.943156,212.605619],title:"Glowstone Cay",type:"île aux trésors",radius:1.5,forsaken:!0,isSeapost:!1},{loc:[-144.69457,179.491523],islandNameMarkerLoc:[-144.69457,179.491523],title:"Flame's End",type:"île aux trésors",radius:1.5,forsaken:!0,isSeapost:!1},{loc:[-147.193195,167.058118],islandNameMarkerLoc:[-147.193195,167.058118],title:"Roaring Traders",type:"poste en mer",radius:1,forsaken:!0,isSeapost:!0},{loc:[-152.506808,204.045938],islandNameMarkerLoc:[-152.506808,204.045938],title:"Magma's Tide",type:"île aux trésors",radius:2,forsaken:!0,isSeapost:!1},{loc:[-157.382829,187.676328],islandNameMarkerLoc:[-157.382829,187.676328],title:"The Devil's Thirst",type:"île aux trésors",radius:3,forsaken:!0,isSeapost:!1},{loc:[-159.258222,167.432994],islandNameMarkerLoc:[-159.258222,167.432994],title:"Burning Sands",type:"île aux trésors",radius:1.5,forsaken:!0,isSeapost:!1},{loc:[-172.636024,175.305402],islandNameMarkerLoc:[-172.636024,175.305402],title:"Ashen Reaches",type:"île aux trésors",radius:3,forsaken:!0,isSeapost:!1}],g=[{loc:[-16.1005,35.278949],title:"D3",isLarge:!0,desc:"Large (3rd out of the 4 offshore rocks counting from the east, at the back of the island, D2"},{loc:[-22.745271,135.124285],title:"Marauder's Arch",isLarge:!0,desc:"South top"},{loc:[-54.988041,71.873989],title:"Hidden Spring Keep",isLarge:!1,desc:" Very top, use the South West cannon"},{loc:[-142.478323,128.428828],title:"Devil's Ridge",isLarge:!1,desc:" North side underneath the ridge"},{loc:[-64.763573,86.934257],title:"K9",isLarge:!1,desc:"Underwater, uncharted island"},{loc:[-73.23633,103.936164],title:"Shipwreck Bay",isLarge:!0,desc:"Northern small island"},{loc:[-70.532986,51.038615],title:"Cannon Cove",isLarge:!0,desc:"Northern small island"},{loc:[-98.065754,17.249381],title:"Mermaid's Hideaway",isLarge:!1,desc:"Across from the Southern peak"},{loc:[-133.460937,80.585938],title:"Plunder Outpost",isLarge:!0,desc:"South top"},{loc:[-148.01744,101.459982],title:"Thieves Haven",isLarge:!1,desc:"East rock in the water"},{loc:[-135.604944,83.10854],title:"Plunder Outpost",isLarge:!0,desc:"South top"}],h=[{loc:[-19.29761,43.108748],title:"Smugglers Bay"},{loc:[-22.235517,136.749201],title:"Marauder's Arch"},{loc:[-70.501164,50.554064],title:"Cannon Cove"},{loc:[-80.548623,120.702367],title:"The Crooked Masts"},{loc:[-90.954813,145.288321],title:"Kraken's Fall"},{loc:[-85.642033,179.030255],title:"Fetcher's Rest"},{loc:[-96.767313,15.671325],title:"Mermaid's Hideaway"},{loc:[-118.127325,52.124172],title:"Plunder Valley"},{loc:[-117.744397,107.006777],title:"Crook's Hollow"},{loc:[-119.517574,201.600493],title:"Crook's Hollow"},{loc:[-143.071842,128.265031],title:"Devil's Ridge"},{loc:[-156.431205,187.968065],title:"The Devil's Thirst"}],f=[{loc:[-42.471588,61.804962],title:"Lone Cove - Deadshot Charlotte"},{loc:[-73.784149,103.488647],title:"Shipwreck Bay - Grogsoaked Ed"},{loc:[-92.504761,147.521606],title:"Kraken's Fall - Lootin Penelope"},{loc:[-88.219971,176.605042],title:"Fletcher's Rest - Walter the Feared"},{loc:[-119.66217,200.650238],title:"Ruby's Fall - Burnin' Tony"},{loc:[-143.671936,128.255554],title:"Devil's Ridge - Martha the Fierce"},{loc:[-116.560669,106.010834],title:"Crook's Hollow - Wild Henry"},{loc:[-96.860016,16.258972],title:"Mermaid's Hideaway - Five Paces Frank"}];m.forEach(function(e){e.searchData="island|"+e.title}),f.forEach(function(e){e.searchData="cargorun|"+e.title});var y,k=o,S=!1,v=[],w=-1;console.log("-- detect isOnline: "+k);var M="";"localhost"!=location.hostname&&(M="https://cdn.chenzorama.com/"),function(){var e=L.GridLayer.prototype._initTile;L.GridLayer.include({_initTile:function(t){e.call(this,t);var r=this.getTileSize();t.style.width=r.x+1+"px",t.style.height=r.y+1+"px"}})}();var N=L.map("mapid",{maxZoom:7,minZoom:2,crs:L.CRS.Simple,attributionControl:!1,preferCanvas:!1,maxBoundsViscosity:1}).setView([70,70],4),T=new L.LatLngBounds(N.unproject([0,25522],7),N.unproject([27444,0],7));N.setMaxBounds(T,{padding:[600,600]}),new L.Hash(N),L.tileLayer(M+"images/tiles/v2.4/{z}/{x}/{y}.png",{minZoom:2,maxZoom:7,bounds:T,noWrap:!0,tms:!1}).addTo(N);var b=L.icon({iconUrl:"/images/markers/xmarkthespot_marker.png",shadowUrl:"/images/markers/xmarkthespot_marker.png",iconSize:[40,52],shadowSize:[0,0],iconAnchor:[20,52],shadowAnchor:[0,0],popupAnchor:[0,0]}),O=(L.icon({iconUrl:"/images/markers/compass.png",shadowUrl:"/images/markers/compass.png",iconSize:[50,48],shadowSize:[0,0],iconAnchor:[25,24],shadowAnchor:[0,0],popupAnchor:[0,0]}),L.icon({iconUrl:"/images/markers/boat_marker.png",shadowUrl:"/images/markers/boat_marker.png",iconSize:[50,59],shadowSize:[0,0],iconAnchor:[25,29],shadowAnchor:[0,0],popupAnchor:[0,0]}));N.on("click",function(e){console.log("You clicked the map at "+e.latlng)});var A=new L.LayerGroup;N.addLayer(A);var x=new L.LayerGroup;p.push(["islands",C]),N.addLayer(x);var C=new L.LayerGroup;p.push(["chickens",C]);var E=new L.LayerGroup;p.push(["snakes",E]);var _=new L.LayerGroup;p.push(["pigs",_]);var j=L.icon({iconUrl:"/images/markers/chicken_marker.png",shadowUrl:"/images/markers/chicken_marker.png",iconSize:[30,30],shadowSize:[0,0],iconAnchor:[0,30],shadowAnchor:[0,0],popupAnchor:[0,0]}),P=L.icon({iconUrl:"/images/markers/snake_marker.png",shadowUrl:"/images/markers/snake_marker.png",iconSize:[30,30],shadowSize:[0,0],iconAnchor:[30,30],shadowAnchor:[0,0],popupAnchor:[0,0]}),R=L.icon({iconUrl:"/images/markers/pig_marker.png",shadowUrl:"/images/markers/pig_marker.png",iconSize:[30,30],shadowSize:[0,0],iconAnchor:[30,0],shadowAnchor:[0,0],popupAnchor:[0,0]});L.islandCircle=L.Circle.extend({options:{name:"islandName",json:{}}});var D=[];for(var F in m){var H=m[F].title,z=m[F].radius,B="islandClass "+window.websafe(H),U=new L.islandCircle(m[F].loc,{strokeweight:1,opacity:0,color:"#fff",fillColor:"#fff",fillOpacity:0,radius:z,className:B,name:H,title:H,json:m[F]}),I=(new L.Marker(m[F].islandNameMarkerLoc,{}).addTo(N),m[F].hasOwnProperty("markerAnchorX")?m[F].markerAnchorX:50),X=new L.Marker(m[F].islandNameMarkerLoc,{icon:new L.DivIcon({className:"title-location",iconAnchor:[I,20],html:'<span class="my-div-span" data-anchor-x="'+I+'">'+m[F].title+"</span>"})}).addTo(x);if(X.bindPopup('<div class="lf-popup"><img src="/images/screenshots/small/'+(void 0!==m[F].img?m[F].img:"bientot.jpg")+'" /><span class="popup-title-island">'+m[F].title+'</span><span class="popup-type-island">'+m[F].type+'</span><span class="popup-img-island hiddenDiv">'+(void 0!==m[F].img?m[F].img:"bientot.jpg")+'</span><span class="popup-hasChickens-island hiddenDiv">'+(m[F].hasOwnProperty("chickens")?"O":"N")+'</span><span class="popup-hasPigs-island hiddenDiv">'+(m[F].hasOwnProperty("pigs")?"O":"N")+'</span><span class="popup-hasSnakes-island hiddenDiv">'+(m[F].hasOwnProperty("snakes")?"O":"N")+"</span></div>",{minWidth:322}),X.on("mouseover",function(e){this.openPopup()}),X.on("mouseout",function(e){this.closePopup()}),X.on("click",function(e){N.setView(this.getLatLng(),6);var t=document.getElementById("islandModal"),r=document.getElementById("islandModalImg"),o=document.getElementById("islandModalTitre"),n=document.getElementById("islandModalType"),a=document.getElementsByClassName("closeModal")[0];t.style.display="block",a.onclick=function(){t.style.display="none"},window.onclick=function(e){e.target==t&&(t.style.display="none")},r.src="/images/screenshots/medium/"+document.getElementsByClassName("popup-img-island")[0].innerHTML,o.innerHTML=document.getElementsByClassName("popup-title-island")[0].innerHTML,n.innerHTML=document.getElementsByClassName("popup-type-island")[0].innerHTML,$("#islandModalAnimals").html(""),"O"==document.getElementsByClassName("popup-hasChickens-island")[0].innerHTML&&$("#islandModalAnimals").append('<div class="animal-box"><img src="/images/animal-info-box/chicken-icon-small.png" /></div>'),"O"==document.getElementsByClassName("popup-hasPigs-island")[0].innerHTML&&$("#islandModalAnimals").append('<div class="animal-box"><img src="/images/animal-info-box/pig-icon-white.png" height="20" /></div>'),"O"==document.getElementsByClassName("popup-hasSnakes-island")[0].innerHTML&&$("#islandModalAnimals").append('<div class="animal-box"><img src="/images/animal-info-box/snake-icon-white-small.png" /></div>'),this.closePopup()}),A.addLayer(U),D[F]=U,m[F].circle=U,U.on({mousedown:function(e){S?(e.target.classList.add("pig show"),N.dragging.disable(),N.on("mousemove",function(t){e.target.setLatLng(t.latlng)})):(e.target._path.classList.remove("pig","show"),ce(),de())},mouseup:function(e){S&&(N.removeEventListener("mousemove"),console.log(e.target.options.title),console.log("["+e.latlng.lat+", "+e.latlng.lng+"],"),N.dragging.enable())}}),m[F].chickens){var G=ge(m[F].loc,.5*z,.6*z);(q=L.marker(G,{icon:j,title:"chicken"}).addTo(C)).setIcon(j)}if(m[F].snakes)var W=ge(m[F].loc,.5*z,.6*z*-1),q=L.marker(W,{icon:P,title:"snake"}).addTo(E);if(m[F].pigs){var K=ge(m[F].loc,.5*z*-1,.6*z*-1);q=L.marker(K,{icon:R,title:"pigs"}).addTo(_)}}var Z=null;N.on("zoomend",function(){N.getZoom()<4?N.removeLayer(x):N.addLayer(x);var e=$(".title-location");switch(N.getZoom()){case 5:e.css("font-size",28),Z!=N.getZoom()&&fe(.18),Z=N.getZoom();break;case 6:e.css("font-size",33),Z!=N.getZoom()&&fe(.41),Z=N.getZoom();break;case 7:e.css("font-size",63),Z!=N.getZoom()&&fe(1.73),Z=N.getZoom();break;default:e.css("font-size",23),Z!=N.getZoom()&&fe(0),Z=4}});var Y=new L.LayerGroup;p.push(["beacons",Y]);var V=L.icon({iconUrl:"/images/markers/beacon_marker.png",shadowUrl:"/images/markers/beacon_marker.png",iconSize:[31,40],shadowSize:[0,0],iconAnchor:[15,40],shadowAnchor:[0,0],popupAnchor:[-20,-45]});for(var J in h){var Q=h[J].loc;q=L.marker(Q,{icon:V,title:"Beacon"}).addTo(Y)}var ee=new L.LayerGroup;p.push(["cargoruns",ee]);var te=L.icon({iconUrl:"/images/markers/crate_marker.png",shadowUrl:"/images/markers/crate_marker.png",iconSize:[31,40],shadowSize:[0,0],iconAnchor:[15,40],shadowAnchor:[0,0],popupAnchor:[0,-45]}),re=[];for(var J in f)Q=f[J].loc,q=L.marker(Q,{icon:te,title:"Cargo Run",name:f[J].title}).addTo(ee).bindPopup(f[J].title),re[J]=q;var oe=new L.LayerGroup;p.push(["thrones",oe]);var ne=L.icon({iconUrl:"/images/markers/throne_marker.png",shadowUrl:"/images/markers/throne_marker.png",iconSize:[30,30],shadowSize:[0,0],iconAnchor:[15,30],shadowAnchor:[0,0],popupAnchor:[-20,-45]});for(var J in g)Q=g[J].loc,q=L.marker(Q,{icon:ne,title:"Skelton Throne"}).addTo(oe).bindPopup(g[J].desc);var ae,ie=L.layerGroup([A]),se=new L.Control.Search({position:"topright",layer:ie,textPlaceholder:langDictionnary.LFL_SEARCH_PLACEMARK,propertyName:"name",initial:!1,zoom:6,marker:!1,buildTip:function(e,t){return'<a href="#" class="'+function(e){var t="island";return re.forEach(function(r){r.getLatLng().lat==e.lat&&r.getLatLng().lng==e.lng&&(console.log("Cargo Run Destination Found"),t="cargo")}),t}(t)+'">'+e+"</a>"}});N.addControl(se),se.on("search:locationfound",function(e){console.log(e),void 0!==(ae=e.layer).setOpacity&&(ae.setOpacity(1),ae.openPopup())}),se.on("search:collapsed",function(e){void 0!==ae&&void 0!==ae.setOpacity&&(ae.setOpacity(0),ae.closePopup())});var le=L.popup({maxWidth:"500",minWidth:"120",className:"context_popup"});function ce(){y&&N.removeLayer(y)}function ue(e){var t=L.marker(e,{icon:b,draggable:!0}).addTo(N);t.on("dragend",function(e){console.log("marker dragend event"),he()}),v.push(t)}function pe(e){$(".floating_dialog").html(e).addClass("show")}function de(){$(".floating_dialog").removeClass("show")}function me(){N.getZoom()>=4&&$(".leaflet-grid-label").addClass("big")}function ge(e,t,r){return[e[0]+t,e[1]+r]}function he(){var e=function(){var e,t="";return v.forEach(function(r){e=r.getLatLng().lat+","+r.getLatLng().lng+";",t+=e}),t=window.encodeURIComponent(window.btoa(t))}();updateQueryStringParam("mkrs",e)}function fe(e){x.getLayers().forEach(function(t){var r=t.options.icon,o=r.options.iconAnchor,n=$(r.options.html).data("anchor-x"),a=n+n*e;r.options.iconAnchor=[a,o[1]],t.setIcon(r)})}N.on("contextmenu",function(e){var t=e.latlng;le.setLatLng(e.latlng).setContent("<ul><li class='js-addMarker'>"+langDictionnary.CTX_MENU_ADD_MARKER+"</li>        <li class='js-clearMarkers'>"+langDictionnary.CTX_MENU_CLEAR_MARKERS+"</li>        <li class='js-closest' data-type='chickens'>"+langDictionnary.CTX_MENU_CLOSEST_CHICKENS+"</li>        <li class='js-closest' data-type='pigs'>"+langDictionnary.CTX_MENU_CLOSEST_PIGS+"</li>        <li class='js-closest' data-type='snakes'>"+langDictionnary.CTX_MENU_CLOSEST_SNAKES+"</li>        <li class='js-closest' data-type='outpost'>"+langDictionnary.CTX_MENU_CLOSEST_OUTPOST+"</li>        </ul>").openOn(N),$(".js-addMarker").click(function(){ue(t),he(),N.closePopup()}),$(".js-clearMarkers").click(function(){v.forEach(function(e){N.removeLayer(e)}),v=[],ce(),de(),he(),N.closePopup()}),$(".js-closest").click(function(){var r=$(this).data("type"),o=function(e,t){var r,o=1e3,n={};for(var a in m){var i=m[a].title,s=m[a].loc;(r=N.distance(s,e))<o&&m[a][t]&&(o=r,n.title=i,n.islandData=m[a])}return n.bearing=window.angle360(e.lat,e.lng,n.islandData.loc[0],n.islandData.loc[1]),n}(e.latlng,r),n=o.islandData;$(".islandClass").removeClass("show pigs chickens snakes outposts"),n.circle._path.classList.add(r,"show");var a=r.toUpperCase(),i=langDictionnary["POPUP_MSG_NEAREST_"+a];i=u.format(i,window.getCardinalFromDeg(o.bearing),o.title),function(e,t){ce(),y=L.marker(e,{icon:O,draggable:!1}).addTo(N),console.log(y._icon.style);var r=y._icon.style.transform+" rotate("+t+"deg)";console.log(r),y._icon.style.transform=r,v.push(y)}(t,o.bearing),pe(i),N.closePopup()})}),L.simpleGraticule({interval:8.2,vinterval:7.7,showOriginLabel:!1,redraw:"move"}).addTo(N),N.on("zoomend",function(){me()}),N.on("move",function(){me()}),N.on("moveend",function(){me()}),window.dev={toggleOn:function(){console.log("dev"),$(".islandClass").addClass("show"),S=!0}};var ye=0;$(function(){var e,t;$(".js-searchforisland").click(function(){var e=function e(t){return"left"==t?--w<0&&(w=m.length-1):++w>=m.length&&(w=0),m[w].isFortress||m[w].outpost||m[w].isSeapost?e(t):m[w]}($(this).data("dir")).loc;N.setView(e,7),me(),pe("Island "+(w+1)+" of "+m.length),clearTimeout(ye),ye=setTimeout(de,3e3)}),$(".js-toggleMarkers").click(function(){var e,t,r;e=$(this).attr("name"),t=$(this).is(":checked"),r=function(e){for(var t=0;t<p.length;t++)if(p[t][0]==e)return p[t][1]}(e),t?N.addLayer(r):N.removeLayer(r)}),$(".js-fullscreen").click(function(){window.toggleFullScreen()}),$(".js-share").click(function(){var e=window.location.href;navigator.clipboard.writeText(e).then(function(){console.log("Async: Copying to clipboard was successful!"),pe("Current Map Location URL Copied To Clipboard!"),setTimeout(de,4e3)},function(e){console.error("Async: Could not copy text: ",e)})}),$(".js-installfiles").click(function(){console.log("click install"),function(){console.log("installer called");var e=new XMLHttpRequest;e.open("GET","data/mapfile_list.json?cb=5",!0),e.onload=function(){if(e.status>=200&&e.status<400){var t=JSON.parse(e.responseText).mapFileList;s=t.length,console.log(t.length),c(t,100)}else console.log("ERROR")},e.onerror=function(){console.log("ERROR")},e.send()}()}),$(".js-settings").click(function(){console.log("click settings"),$(".settings").addClass("open")}),$(".js-close-settings").click(function(){console.log("click settings"),$(".settings").removeClass("open")}),e=new URLSearchParams(window.location.search),t=window.decodeURIComponent(e.get("mkrs")),null!==e.get("mkrs")&&window.atob(t).split(";").forEach(function(e){""!==e&&ue(e.split(","))})})}]);
//# sourceMappingURL=maps/sotm.js.map