!function(e){var n={};function t(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(o,i,function(n){return e[n]}.bind(null,i));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=0)}([function(e,n,t){e.exports=t(6)},function(e,n){window.updateQueryStringParam=function(e,n){var t=[location.protocol,"//",location.host,location.pathname].join(""),o=document.location.search,i=e+"="+n,r="?"+i;if(o){var s=new RegExp("([?&])"+e+"[^&]*"),a=new RegExp("([?&])"+e+"=[^&;]+[&;]?");r=void 0===n||null==n||""==n?(r=o.replace(a,"$1")).replace(/[&;]$/,""):null!==o.match(s)?o.replace(s,"$1"+i):o+"&"+i}r="?"==r?"":r;var l=window.location.hash;window.history.replaceState({},"",t+r+l)},window.websafe=function(e){return e.match(/[a-zA-Z0-9]+/g).join("-").toLowerCase()},window.angle=function(e,n,t,o){var i=o-n,r=t-e;return Math.atan2(i,r)*(180/Math.PI)},window.angle360=function(e,n,t,o){var i=angle(e,n,t,o);return i<0&&(i=360+i),i},window.getCardinalFromDeg=function(e){var n=langDictionnary.COMPASS_NORTH;return e>=0&&11.25>e?n=langDictionnary.COMPASS_NORTH:e>=11.25&&33.75>e?n=langDictionnary.COMPASS_NORTH_BY_NORTH_EAST:e>=33.75&&56.25>e?n=langDictionnary.COMPASS_NORTH_EAST:e>=56.25&&78.75>e?n=langDictionnary.COMPASS_EAST_BY_NORTH_EAST:e>=78.75&&101.25>e?n=langDictionnary.COMPASS_EAST:e>=101.25&&123.75>e?n=langDictionnary.COMPASS_EAST_BY_SOUTH_EAST:e>=123.75&&146.25>e?n=langDictionnary.COMPASS_SOUTH_EAST:e>=146.25&&168.75>e?n=langDictionnary.COMPASS_SOUTH_BY_SOUTH_EAST:e>=168.75&&191.25>e?n=langDictionnary.COMPASS_SOUTH:e>=191.25&&213.75>e?n=langDictionnary.COMPASS_SOUTH_BY_SOUTH_WEST:e>=213.75&&236.25>e?n=langDictionnary.COMPASS_SOUTH_WEST:e>=236.25&&258.75>e?n=langDictionnary.COMPASS_WEST_BY_SOUTH_WEST:e>=258.75&&281.25>e?n=langDictionnary.COMPASS_WEST:e>=281.25&&303.75>e?n=langDictionnary.COMPASS_WEST_BY_NORTH_WEST:e>=303.75&&326.25>e?n=langDictionnary.COMPASS_NORTH_WEST:e>=326.25&&348.75>e&&(n=langDictionnary.COMPASS_NORTH_BY_NORTH_WEST),n},window.toggleFullScreen=function(){document.fullScreenElement&&null!==document.fullScreenElement||!document.mozFullScreen&&!document.webkitIsFullScreen?document.documentElement.requestFullScreen?document.documentElement.requestFullScreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():document.documentElement.webkitRequestFullScreen&&document.documentElement.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT):document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen()}},function(e,n,t){(function(e){var o=Object.getOwnPropertyDescriptors||function(e){for(var n=Object.keys(e),t={},o=0;o<n.length;o++)t[n[o]]=Object.getOwnPropertyDescriptor(e,n[o]);return t},i=/%[sdj%]/g;n.format=function(e){if(!y(e)){for(var n=[],t=0;t<arguments.length;t++)n.push(a(arguments[t]));return n.join(" ")}t=1;for(var o=arguments,r=o.length,s=String(e).replace(i,function(e){if("%%"===e)return"%";if(t>=r)return e;switch(e){case"%s":return String(o[t++]);case"%d":return Number(o[t++]);case"%j":try{return JSON.stringify(o[t++])}catch(e){return"[Circular]"}default:return e}}),l=o[t];t<r;l=o[++t])m(l)||!A(l)?s+=" "+l:s+=" "+a(l);return s},n.deprecate=function(t,o){if(void 0!==e&&!0===e.noDeprecation)return t;if(void 0===e)return function(){return n.deprecate(t,o).apply(this,arguments)};var i=!1;return function(){if(!i){if(e.throwDeprecation)throw new Error(o);e.traceDeprecation?console.trace(o):console.error(o),i=!0}return t.apply(this,arguments)}};var r,s={};function a(e,t){var o={seen:[],stylize:c};return arguments.length>=3&&(o.depth=arguments[2]),arguments.length>=4&&(o.colors=arguments[3]),h(t)?o.showHidden=t:t&&n._extend(o,t),S(o.showHidden)&&(o.showHidden=!1),S(o.depth)&&(o.depth=2),S(o.colors)&&(o.colors=!1),S(o.customInspect)&&(o.customInspect=!0),o.colors&&(o.stylize=l),u(o,e,o.depth)}function l(e,n){var t=a.styles[n];return t?"["+a.colors[t][0]+"m"+e+"["+a.colors[t][1]+"m":e}function c(e,n){return e}function u(e,t,o){if(e.customInspect&&t&&O(t.inspect)&&t.inspect!==n.inspect&&(!t.constructor||t.constructor.prototype!==t)){var i=t.inspect(o,e);return y(i)||(i=u(e,i,o)),i}var r=function(e,n){if(S(n))return e.stylize("undefined","undefined");if(y(n)){var t="'"+JSON.stringify(n).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(t,"string")}return f(n)?e.stylize(""+n,"number"):h(n)?e.stylize(""+n,"boolean"):m(n)?e.stylize("null","null"):void 0}(e,t);if(r)return r;var s=Object.keys(t),a=function(e){var n={};return s.forEach(function(e,t){n[e]=!0}),n}();if(e.showHidden&&(s=Object.getOwnPropertyNames(t)),k(t)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return p(t);if(0===s.length){if(O(t)){var l=t.name?": "+t.name:"";return e.stylize("[Function"+l+"]","special")}if(v(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(w(t))return e.stylize(Date.prototype.toString.call(t),"date");if(k(t))return p(t)}var c,A="",I=!1,L=["{","}"];return g(t)&&(I=!0,L=["[","]"]),O(t)&&(A=" [Function"+(t.name?": "+t.name:"")+"]"),v(t)&&(A=" "+RegExp.prototype.toString.call(t)),w(t)&&(A=" "+Date.prototype.toUTCString.call(t)),k(t)&&(A=" "+p(t)),0!==s.length||I&&0!=t.length?o<0?v(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),c=I?function(e,n,t,o,i){for(var r=[],s=0,a=n.length;s<a;++s)P(n,String(s))?r.push(d(e,n,t,o,String(s),!0)):r.push("");return i.forEach(function(i){i.match(/^\d+$/)||r.push(d(e,n,t,o,i,!0))}),r}(e,t,o,a,s):s.map(function(n){return d(e,t,o,a,n,I)}),e.seen.pop(),function(e,n,t){return e.reduce(function(e,n){return n.indexOf("\n"),e+n.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?t[0]+(""===n?"":n+"\n ")+" "+e.join(",\n  ")+" "+t[1]:t[0]+n+" "+e.join(", ")+" "+t[1]}(c,A,L)):L[0]+A+L[1]}function p(e){return"["+Error.prototype.toString.call(e)+"]"}function d(e,n,t,o,i,r){var s,a,l;if((l=Object.getOwnPropertyDescriptor(n,i)||{value:n[i]}).get?a=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(a=e.stylize("[Setter]","special")),P(o,i)||(s="["+i+"]"),a||(e.seen.indexOf(l.value)<0?(a=m(t)?u(e,l.value,null):u(e,l.value,t-1)).indexOf("\n")>-1&&(a=r?a.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+a.split("\n").map(function(e){return"   "+e}).join("\n")):a=e.stylize("[Circular]","special")),S(s)){if(r&&i.match(/^\d+$/))return a;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function g(e){return Array.isArray(e)}function h(e){return"boolean"==typeof e}function m(e){return null===e}function f(e){return"number"==typeof e}function y(e){return"string"==typeof e}function S(e){return void 0===e}function v(e){return A(e)&&"[object RegExp]"===I(e)}function A(e){return"object"==typeof e&&null!==e}function w(e){return A(e)&&"[object Date]"===I(e)}function k(e){return A(e)&&("[object Error]"===I(e)||e instanceof Error)}function O(e){return"function"==typeof e}function I(e){return Object.prototype.toString.call(e)}function L(e){return e<10?"0"+e.toString(10):e.toString(10)}n.debuglog=function(t){if(S(r)&&(r=e.env.NODE_DEBUG||""),t=t.toUpperCase(),!s[t])if(new RegExp("\\b"+t+"\\b","i").test(r)){var o=e.pid;s[t]=function(){var e=n.format.apply(n,arguments);console.error("%s %d: %s",t,o,e)}}else s[t]=function(){};return s[t]},n.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=g,n.isBoolean=h,n.isNull=m,n.isNullOrUndefined=function(e){return null==e},n.isNumber=f,n.isString=y,n.isSymbol=function(e){return"symbol"==typeof e},n.isUndefined=S,n.isRegExp=v,n.isObject=A,n.isDate=w,n.isError=k,n.isFunction=O,n.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},n.isBuffer=t(4);var T=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function P(e,n){return Object.prototype.hasOwnProperty.call(e,n)}n.log=function(){console.log("%s - %s",function(){var e=new Date,n=[L(e.getHours()),L(e.getMinutes()),L(e.getSeconds())].join(":");return[e.getDate(),T[e.getMonth()],n].join(" ")}(),n.format.apply(n,arguments))},n.inherits=t(5),n._extend=function(e,n){if(!n||!A(n))return e;for(var t=Object.keys(n),o=t.length;o--;)e[t[o]]=n[t[o]];return e};var b="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function _(e,n){if(!e){var t=new Error("Promise was rejected with a falsy value");t.reason=e,e=t}return n(e)}n.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(b&&e[b]){var n;if("function"!=typeof(n=e[b]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(n,b,{value:n,enumerable:!1,writable:!1,configurable:!0}),n}function n(){for(var n,t,o=new Promise(function(e,o){n=e,t=o}),i=[],r=0;r<arguments.length;r++)i.push(arguments[r]);i.push(function(e,o){e?t(e):n(o)});try{e.apply(this,i)}catch(e){t(e)}return o}return Object.setPrototypeOf(n,Object.getPrototypeOf(e)),b&&Object.defineProperty(n,b,{value:n,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(n,o(e))},n.promisify.custom=b,n.callbackify=function(n){if("function"!=typeof n)throw new TypeError('The "original" argument must be of type Function');function t(){for(var t=[],o=0;o<arguments.length;o++)t.push(arguments[o]);var i=t.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");var r=this,s=function(){return i.apply(r,arguments)};n.apply(this,t).then(function(n){e.nextTick(s,null,n)},function(n){e.nextTick(_,n,s)})}return Object.setPrototypeOf(t,Object.getPrototypeOf(n)),Object.defineProperties(t,o(n)),t}}).call(this,t(3))},function(e,n){var t,o,i=e.exports={};function r(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(e){t=r}try{o="function"==typeof clearTimeout?clearTimeout:s}catch(e){o=s}}();var l,c=[],u=!1,p=-1;function d(){u&&l&&(u=!1,l.length?c=l.concat(c):p=-1,c.length&&g())}function g(){if(!u){var e=a(d);u=!0;for(var n=c.length;n;){for(l=c,c=[];++p<n;)l&&l[p].run();p=-1,n=c.length}l=null,u=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===s||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(n){try{return o.call(null,e)}catch(n){return o.call(this,e)}}}(e)}}function h(e,n){this.fun=e,this.array=n}function m(){}i.nextTick=function(e){var n=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)n[t-1]=arguments[t];c.push(new h(e,n)),1!==c.length||u||a(g)},h.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,n){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,n){"function"==typeof Object.create?e.exports=function(e,n){e.super_=n,e.prototype=Object.create(n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,n){e.super_=n;var t=function(){};t.prototype=n.prototype,e.prototype=new t,e.prototype.constructor=e}},function(e,n,t){"use strict";t.r(n);var o;let i;window.addEventListener("load",function(){function e(e){console.log("online offline update"),navigator.onLine?console.log("went online"):console.log(" went offline")}window.addEventListener("online",e),window.addEventListener("offline",e)}),"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js").then(function(){console.log("Service Worker Registered")}),o=!!navigator.onLine;var r,s=document.querySelector("#install-button");window.addEventListener("beforeinstallprompt",e=>{console.log("beforeinstallprompt - showme!!!"),e.preventDefault(),i=e,document.querySelector("#installBut").classList.add("showme")}),s.addEventListener("click",()=>{document.querySelector("#installBut").classList.remove("showme"),i.prompt(),i.userChoice.then(e=>{"accepted"===e.outcome?console.log("User accepted the A2HS prompt"):console.log("User dismissed the A2HS prompt"),i=null})}),window.addEventListener("appinstalled",e=>{console.log("a2hs","installed")});var a=0,l=0,c=function(e,n){caches.open("sotm-v1.8").then(t=>t.addAll(e.slice(l,l+n))).catch(function(e){console.log("ERROR!?!!!"),console.log(e)}).then(function(){console.log("DONE CACHING: ",l,n,a);var t=0;l==a?(console.log("REALLY REALLY done caching"),r="Install Complete: ",t=100):(l+n>a?(n=a-l,l=a):l+=n,t=l/a*100,c(e,n),r="Installing: "),console.log(t),$(".js-percent").html(r+Math.ceil(t)+"%")}).catch(function(e){console.log("Error Type 4"),console.log(e)})};t(1);const u=t(2);var p=[],d=window.location.pathname.substr(1);console.log("language: "+d);var g=[{loc:[-41.819753270587555,62.927539082707604],title:"Lone Cove",isInAreaShoresOfPlenty:!0,img:"loneCove.jpg",radius:3,pigs:!0,snakes:!0},{loc:[-69.94175507751075,50.54955884969927],title:"Cannon Cove",isInAreaShoresOfPlenty:!0,img:"cannonCove.jpg",radius:4,chickens:!0,pigs:!0},{loc:[-67.62877065330183,65.30062001780092],title:"Rum Runner Isle",isInAreaShoresOfPlenty:!0,radius:2,pigs:!0},{loc:[-80.94564356372827,121.30273506665486],title:"The Crooked Masts",isInAreaWilds:!0,radius:3,chickens:!0,snakes:!0},{loc:[-29.006074941430732,18.117840198163094],title:"Sailor's Bounty",isInAreaShoresOfPlenty:!0,img:"sailorsBounty.jpg",radius:4,chickens:!0,pigs:!0},{loc:[-21.065393452707312,42.86583042922642],title:"Smuggler's Bay",isInAreaShoresOfPlenty:!0,img:"smugglersBay.jpg",radius:4,chickens:!0,snakes:!0},{loc:[-22.940799321639105,57.487891142156535],title:"Salty Sands",isInAreaShoresOfPlenty:!0,img:"saltySands.jpg",radius:1.5,chickens:!0},{loc:[-28.629490743342114,69.55120761078706],title:"Picaroon Palms",isInAreaShoresOfPlenty:!0,img:"picaroonPalms.jpg",radius:1.5,snakes:!0},{loc:[-28.19171579987219,88.62081716840055],title:"Scurvy Isley",isInAreaWilds:!0,img:"scurveyIsley.jpg",radius:1.5},{loc:[-28.691820540241682,107.0555642878491],title:"Old Faithful Isle",isInAreaWilds:!0,img:"oldFaithfulIsle.jpg",radius:4,chickens:!0,pigs:!0},{loc:[-22.8781029334463,120.48941102991489],title:"Black Sand Atoll",isInAreaWilds:!0,radius:1.5,snakes:!0},{loc:[-21.566440856402263,136.5557290968507],title:"Marauder's Arch",isInAreaWilds:!0,radius:3,chickens:!0,pigs:!0},{loc:[-32.44278938865952,32.80535275921895],title:"Sandy Shallows",isInAreaShoresOfPlenty:!0,img:"sandyShallows.jpg",radius:1.5,snakes:!0},{loc:[-33.44299886939851,50.23934822463562],title:"Boulder Cay",isInAreaShoresOfPlenty:!0,img:"boulderCay.jpg",radius:1.5,chickens:!0},{loc:[-45.00792099044309,24.432035940703415],title:"Keel Haul Fort",isInAreaShoresOfPlenty:!0,img:"keelHaulFort.jpg",radius:2,isFortress:!0},{loc:[-48.25860180284481,43.931357643687285],title:"Sanctuary Outpost",isInAreaShoresOfPlenty:!0,img:"sanctuaryOutpost.jpg",radius:3,outpost:!0},{loc:[-56.135264556210544,57.616119333511065],title:"Lonely Isle",isInAreaShoresOfPlenty:!0,img:"lonelyIsle.jpg",radius:1.5,snakes:!0},{loc:[-55.3851074456563,71.67579309594387],title:"Hidden Spring Keep",isInAreaShoresOfPlenty:!0,img:"hiddenSpringKeep.jpg",radius:2,isFortress:!0},{loc:[-41.13192595693288,114.67807920810932],title:"Blind Man's Lagoon",isInAreaWilds:!0,radius:1.5,pigs:!0},{loc:[-34.818103609768,126.55069260749704],title:"Shark Fin Camp",isInAreaWilds:!0,img:"sharkFinCamp.jpg",radius:1.5,isFortress:!0},{loc:[-42.195761396643945,137.43053681968217],title:"Plunderer's Plight",isInAreaWilds:!0,img:"plunderOutpost.jpg",radius:2,pigs:!0},{loc:[-33.56895462527015,144.36651233641732],title:"Black Water Enclave",isInAreaWilds:!0,radius:1.5,chickens:!0},{loc:[-40.819360494201945,93.80847591354413],title:"Kraken's Watchtower",isInAreaWilds:!0,radius:2,isFortress:!0},{loc:[-54.197162299085946,105.7433527036019],title:"Dagger Tooth Outpost",isInAreaWilds:!0,img:"daggerToothOutpost.jpg",radius:4,outpost:!0},{loc:[-52.32176952270034,125.36404020139321],title:"The Sunken Grove",isInAreaWilds:!0,radius:2,pigs:!0,snakes:!0},{loc:[-55.76110247916651,145.1163475274157],title:"Galleon's Grave Outpost",isInAreaWilds:!0,img:"galleonGraveOutpost.jpg",radius:3,outpost:!0},{loc:[-64.51072835956577,117.43038960965997],title:"Isle of Last Words",isInAreaWilds:!0,radius:1,pigs:!0,snakes:!0},{loc:[-67.69269774083621,130.11909434410913],title:"Skull Keep",isInAreaWilds:!0,radius:2,isFortress:!0},{loc:[-71.44348329360741,142.9912651229149],title:"Tri-Rock Isle",isInAreaWilds:!0,radius:2,chickens:!0},{loc:[-67.50237,151.430381],title:"Three Paces East Seapost",isInAreaWilds:!0,radius:1,isSeapost:!0},{loc:[-59.281311,16.456299],title:"The Spoils of Plenty Store",isInAreaShoresOfPlenty:!0,img:"theSpoilsOfPlentyStore.jpg",radius:1,isSeapost:!0},{loc:[-75.235017,64.342312],title:"The North Star Seapost",isInAreaShoresOfPlenty:!0,radius:1,isSeapost:!0},{loc:[-114.96965,94.435731],title:"Stephen's Spoils",isInAreaAncientIsles:!0,img:"stephensSpoils.jpg",radius:1,isSeapost:!0},{loc:[-128.328685,48.139087],title:"The Finest Trading Post",isInAreaAncientIsles:!0,img:"theFinestTradingPost.jpg",radius:1,isSeapost:!0},{loc:[-29.844282,120.967678],title:"The Wild Treasures Store",isInAreaWilds:!0,radius:1,isSeapost:!0},{loc:[-80.07029006498121,135.55539947884748],title:"Shiver Retreat",isInAreaWilds:!0,radius:2,pigs:!0},{loc:[-78.63248893641892,152.05177368081218],title:"Liar's Backbone",isInAreaWilds:!0,radius:2,snakes:!0},{loc:[-92.63542166676478,130.11909434410913],title:"Shark Tooth Key",isInAreaWilds:!0,radius:2,pigs:!0},{loc:[-92.19783001894149,144.99082563224394],title:"Kraken's Fall",isInAreaWilds:!0,img:"krakenFalls.jpg",radius:4,pigs:!0,snakes:!0},{loc:[-74.94438667929433,102.86928662127767],title:"Shipwreck Bay",isInAreaWilds:!0,radius:4,chickens:!0,pigs:!0},{loc:[-58.448248980419464,30.371595953863505],title:"Rapier Cay",isInAreaShoresOfPlenty:!0,img:"rapierCay.jpg",radius:1,chickens:!0},{loc:[-66.31539345270731,15.993498563600905],title:"Crescent Isle",isInAreaShoresOfPlenty:!0,img:"crescentIsle.jpg",radius:3,pigs:!0,snakes:!0},{loc:[-75.94243588991247,31.746234927654953],title:"Golden Sand Outpost",isInAreaShoresOfPlenty:!0,img:"goldenSandOutpost.jpg",radius:3,outpost:!0},{loc:[-81.88115349670785,16.993169376947787],title:"Sea Dog's Rest",isInAreaShoresOfPlenty:!0,radius:1.5,pigs:!0},{loc:[-81.6942164761939,60.23384927983136],title:"Twin Groves",isInAreaShoresOfPlenty:!0,radius:2,chickens:!0},{loc:[-91.6963112835838,48.48771722300551],title:"Wanderer's Refuge",isInAreaShoresOfPlenty:!0,img:"wanderersRefuge.jpg",radius:4,chickens:!0,snakes:!0},{loc:[-91.44625891339905,30.743560286098365],title:"Lagoon of Whispers",isInAreaShoresOfPlenty:!0,radius:2,chickens:!0,snakes:!0},{loc:[-97.13434807797746,16.305895692771806],title:"Mermaid's Hideaway",isInAreaShoresOfPlenty:!0,img:"mermaidsHideaway.jpg",radius:3,chickens:!0,pigs:!0},{loc:[-105.13603701643558,36.36971243938428],title:"Sailor's Knot Stronghold",isInAreaShoresOfPlenty:!0,radius:2,isFortress:!0},{loc:[-103.69823588787327,72.10794401653528],title:"Fools Lagoon",isInAreaAncientIsles:!0,radius:1.5,pigs:!0},{loc:[-100.84721297846644,83.52747464057205],title:"Castaway Isle",isInAreaAncientIsles:!0,img:"castawayIsle.jpg",radius:1,snakes:!0},{loc:[-104.19511986188078,97.48786124216625],title:"Old Boot Fort",isInAreaAncientIsles:!0,radius:2,isFortress:!0},{loc:[-117.31967471531044,51.7447330135501],title:"Plunder Valley",isInAreaAncientIsles:!0,img:"plunderValley.jpg",radius:4,chickens:!0,pigs:!0},{loc:[-115.8779065452535,69.80542248695795],title:"Chicken Isle",isInAreaAncientIsles:!0,radius:2,chickens:!0,pigs:!0},{loc:[-115.25277561979163,85.05040239049788],title:"Snake Island",isInAreaAncientIsles:!0,img:"snakeIsland.jpg",radius:3,pigs:!0,snakes:!0},{loc:[-116.75298510053062,106.67686315627111],title:"Crooks's Hollow",isInAreaAncientIsles:!0,img:"crooksHollow.jpg",radius:3,chickens:!0,snakes:!0},{loc:[-114.69061602599248,122.1182928219427],title:"Barnacle Cay",isInAreaAncientIsles:!0,radius:2,chickens:!0},{loc:[-126.31805123958326,134.36426028544201],title:"Ancient Spire Outpost",isInAreaAncientIsles:!0,img:"ancientSpireOutpost.jpg",radius:2,outpost:!0},{loc:[-124.56687291042644,34.36631770202399],title:"Discovery Ridge",isInAreaAncientIsles:!0,radius:4,chickens:!0,snakes:!0},{loc:[-137.44456997494095,45.05029951966879],title:"Old Salts Atoll",isInAreaAncientIsles:!0,radius:2,chickens:!0},{loc:[-128.94278938865952,65.35611291577732],title:"Lost Gold Fort",isInAreaAncientIsles:!0,radius:2,isFortress:!0},{loc:[-144.821114895391,60.10784114570619],title:"Shark Bait Cove",isInAreaAncientIsles:!0,radius:4,chickens:!0,pigs:!0},{loc:[-148.3847146692707,73.99154401784801],title:"Lookout Point",isInAreaAncientIsles:!0,radius:2,pigs:!0},{loc:[-152.51057877731904,84.98792296466371],title:"Booty Isle",isInAreaAncientIsles:!0,radius:1.5,snakes:!0},{loc:[-134.88188667929433,82.4887459312965],title:"Plunder Outpost",isInAreaAncientIsles:!0,img:"plunderOutpost.jpg",radius:2,outpost:!0},{loc:[-126.75507990792053,95.36808708028451],title:"Paradise Spring",isInAreaAncientIsles:!0,radius:2,pigs:!0},{loc:[-133.19392844017779,104.67752152957733],title:"Cutlass Cay",isInAreaAncientIsles:!0,radius:1.5,snakes:!0},{loc:[-130.13078690541462,117.3608449739159],title:"The Crow's Nest Fortress",isInAreaAncientIsles:!0,img:"theCrowsNestFortress.jpg",radius:2,isFortress:!0},{loc:[-143.50858871029862,113.17472344302583],title:"Mutineer Rock",isInAreaAncientIsles:!0,img:"mutineerRock.jpg",radius:2,chickens:!0},{loc:[-143.75864108048336,128.48218277239994],title:"Devil's Ridge",isInAreaAncientIsles:!0,img:"devilsRidge.jpg",radius:3,pigs:!0,snakes:!0},{loc:[-147.8845051885317,98.80445550116441],title:"Thieves' Haven",isInAreaAncientIsles:!0,radius:4,chickens:!0,pigs:!0},{loc:[-78.938966,191.556523],title:"Scorched Pass",isInAreaDevilsRoar:!0,radius:2},{loc:[-87.003155,200.022485],title:"Brian's Bazaar",isInAreaDevilsRoar:!0,radius:1,isSeapost:!0},{loc:[-84.359375,209.328125],title:"Molten Sands Fortress",isInAreaDevilsRoar:!0,radius:2.5,isFortress:!0},{loc:[-87.5329,177.748416],title:"Fetcher's Rest",isInAreaDevilsRoar:!0,radius:4,isSeapost:!1},{loc:[-96.568248,198.610248],title:"Cursewater Shores",isInAreaDevilsRoar:!0,radius:2,isSeapost:!1},{loc:[-104.69495,169.682274],title:"Cinder Islet",isInAreaDevilsRoar:!0,radius:2,isSeapost:!1},{loc:[-107.257986,185.614528],title:"Flintlock Peninsula",isInAreaDevilsRoar:!0,radius:4,isSeapost:!1},{loc:[-119.318876,201.609261],title:"Ruby's Fall",isInAreaDevilsRoar:!0,radius:3,isSeapost:!1},{loc:[-118.568719,165.308714],title:"The isInAreaDevilsRoar Brink",isInAreaDevilsRoar:!0,radius:1.5,isSeapost:!1},{loc:[-127.003365,178.80427],title:"Marrow's Peak Outpost",isInAreaDevilsRoar:!0,radius:3,outpost:!0,isSeapost:!1},{loc:[-136.81792,198.36031],title:"Brimstone Rock",isInAreaDevilsRoar:!0,radius:1.5,isSeapost:!1},{loc:[-137.943156,212.605619],title:"Glowstone Cay",isInAreaDevilsRoar:!0,radius:1.5,isSeapost:!1},{loc:[-144.69457,179.491523],title:"Flame's End",isInAreaDevilsRoar:!0,radius:1.5,isSeapost:!1},{loc:[-147.193195,167.058118],title:"Roaring Traders",isInAreaDevilsRoar:!0,radius:1,isSeapost:!0},{loc:[-152.506808,204.045938],title:"Magma's Tide",isInAreaDevilsRoar:!0,radius:2,isSeapost:!1},{loc:[-157.382829,187.676328],title:"The Devil's Thirst",isInAreaDevilsRoar:!0,radius:3,isSeapost:!1},{loc:[-159.258222,167.432994],title:"Burning Sands",isInAreaDevilsRoar:!0,radius:1.5,isSeapost:!1},{loc:[-172.636024,175.305402],title:"Ashen Reaches",isInAreaDevilsRoar:!0,radius:3,isSeapost:!1}],h=[{loc:[-16.1005,35.278949],title:"D3",isLarge:!0,desc:"Large (3rd out of the 4 offshore rocks counting from the east, at the back of the island, D2"},{loc:[-22.745271,135.124285],title:"Marauder's Arch",isLarge:!0,desc:"South top"},{loc:[-54.988041,71.873989],title:"Hidden Spring Keep",isLarge:!1,desc:" Very top, use the South West cannon"},{loc:[-142.478323,128.428828],title:"Devil's Ridge",isLarge:!1,desc:" North side underneath the ridge"},{loc:[-64.763573,86.934257],title:"K9",isLarge:!1,desc:"Underwater, uncharted island"},{loc:[-73.23633,103.936164],title:"Shipwreck Bay",isLarge:!0,desc:"Northern small island"},{loc:[-70.532986,51.038615],title:"Cannon Cove",isLarge:!0,desc:"Northern small island"},{loc:[-98.065754,17.249381],title:"Mermaid's Hideaway",isLarge:!1,desc:"Across from the Southern peak"},{loc:[-133.460937,80.585938],title:"Plunder Outpost",isLarge:!0,desc:"South top"},{loc:[-148.01744,101.459982],title:"Thieves Haven",isLarge:!1,desc:"East rock in the water"},{loc:[-135.604944,83.10854],title:"Plunder Outpost",isLarge:!0,desc:"South top"}],m=[{loc:[-19.29761,43.108748],title:"Smugglers Bay"},{loc:[-22.235517,136.749201],title:"Marauder's Arch"},{loc:[-70.501164,50.554064],title:"Cannon Cove"},{loc:[-80.548623,120.702367],title:"The Crooked Masts"},{loc:[-90.954813,145.288321],title:"Kraken's Fall"},{loc:[-85.642033,179.030255],title:"Fetcher's Rest"},{loc:[-96.767313,15.671325],title:"Mermaid's Hideaway"},{loc:[-118.127325,52.124172],title:"Plunder Valley"},{loc:[-117.744397,107.006777],title:"Crook's Hollow"},{loc:[-119.517574,201.600493],title:"Crook's Hollow"},{loc:[-143.071842,128.265031],title:"Devil's Ridge"},{loc:[-156.431205,187.968065],title:"The Devil's Thirst"}],f=[{loc:[-42.471588,61.804962],title:"Lone Cove - Deadshot Charlotte"},{loc:[-73.784149,103.488647],title:"Shipwreck Bay - Grogsoaked Ed"},{loc:[-92.504761,147.521606],title:"Kraken's Fall - Lootin Penelope"},{loc:[-88.219971,176.605042],title:"Fletcher's Rest - Walter the Feared"},{loc:[-119.66217,200.650238],title:"Ruby's Fall - Burnin' Tony"},{loc:[-143.671936,128.255554],title:"Devil's Ridge - Martha the Fierce"},{loc:[-116.560669,106.010834],title:"Crook's Hollow - Wild Henry"},{loc:[-96.860016,16.258972],title:"Mermaid's Hideaway - Five Paces Frank"}];g.forEach(function(e){e.searchData="island|"+e.title}),f.forEach(function(e){e.searchData="cargorun|"+e.title});var y,S=o,v=!1,A=[],w=-1;console.log("-- detect isOnline: "+S);var k="";"localhost"!=location.hostname&&(k="https://cdn.chenzorama.com/"),function(){var e=L.GridLayer.prototype._initTile;L.GridLayer.include({_initTile:function(n){e.call(this,n);var t=this.getTileSize();n.style.width=t.x+1+"px",n.style.height=t.y+1+"px"}})}();var O=L.map("mapid",{maxZoom:7,minZoom:2,crs:L.CRS.Simple,attributionControl:!1,preferCanvas:!1,maxBoundsViscosity:1}).setView([70,70],4),I=new L.LatLngBounds(O.unproject([0,25522],7),O.unproject([27444,0],7));O.setMaxBounds(I,{padding:[600,600]}),new L.Hash(O),L.tileLayer(k+"images/tiles/v2.5/{z}/{x}/{y}.png",{minZoom:2,maxZoom:7,bounds:I,noWrap:!0,tms:!1}).addTo(O);var T=L.icon({iconUrl:"/images/markers/xmarkthespot_marker.png",shadowUrl:"/images/markers/xmarkthespot_marker.png",iconSize:[40,52],shadowSize:[0,0],iconAnchor:[20,52],shadowAnchor:[0,0],popupAnchor:[0,0]}),P=(L.icon({iconUrl:"/images/markers/compass.png",shadowUrl:"/images/markers/compass.png",iconSize:[50,48],shadowSize:[0,0],iconAnchor:[25,24],shadowAnchor:[0,0],popupAnchor:[0,0]}),L.icon({iconUrl:"/images/markers/boat_marker.png",shadowUrl:"/images/markers/boat_marker.png",iconSize:[50,59],shadowSize:[0,0],iconAnchor:[25,29],shadowAnchor:[0,0],popupAnchor:[0,0]}));O.on("click",function(e){console.log("You clicked the map at "+e.latlng)});var b=new L.LayerGroup;O.addLayer(b);var _=new L.LayerGroup;p.push(["islands",C]),O.addLayer(_);var C=new L.LayerGroup;p.push(["chickens",C]);var E=new L.LayerGroup;p.push(["snakes",E]);var j=new L.LayerGroup;p.push(["pigs",j]);var D=L.icon({iconUrl:"/images/markers/chicken_marker.png",shadowUrl:"/images/markers/chicken_marker.png",iconSize:[30,30],shadowSize:[0,0],iconAnchor:[0,30],shadowAnchor:[0,0],popupAnchor:[0,0]}),R=L.icon({iconUrl:"/images/markers/snake_marker.png",shadowUrl:"/images/markers/snake_marker.png",iconSize:[30,30],shadowSize:[0,0],iconAnchor:[30,30],shadowAnchor:[0,0],popupAnchor:[0,0]}),M=L.icon({iconUrl:"/images/markers/pig_marker.png",shadowUrl:"/images/markers/pig_marker.png",iconSize:[30,30],shadowSize:[0,0],iconAnchor:[30,0],shadowAnchor:[0,0],popupAnchor:[0,0]});L.islandCircle=L.Circle.extend({options:{name:"islandName",json:{}}});var F=[];for(var N in g){var U=g[N].title,H=g[N].radius,x="islandClass "+window.websafe(U),z=new L.islandCircle(g[N].loc,{strokeweight:1,opacity:0,color:"#fff",fillColor:"#fff",fillOpacity:0,radius:H,className:x,name:U,title:U,json:g[N]}),B=me(g[N].loc,H+.1*H,0),W=new L.Marker(B,{icon:new L.DivIcon({className:"title-location",iconAnchor:[0,0],iconSize:null,html:'<span class="my-div-span" data-anchor-x="0">'+g[N].title+"</span>"})}).addTo(_),G="";G=g[N].hasOwnProperty("outpost")?"Outpost":g[N].hasOwnProperty("isSeapost")?"Seapost":g[N].hasOwnProperty("isFortress")?"Fortress":g[N].hasOwnProperty("isUncharted")?"Uncharted":"Treasure";var K="";if(g[N].hasOwnProperty("isInAreaShoresOfPlenty")?K="Shores":g[N].hasOwnProperty("isInAreaWilds")?K="Wilds":g[N].hasOwnProperty("isInAreaAncientIsles")?K="Ancient":g[N].hasOwnProperty("isInAreaDevilsRoar")&&(K="Devils"),W.bindPopup('<div class="lf-popup"><img src="/images/screenshots/small/'+(void 0!==g[N].img?g[N].img:"bientot.jpg")+'" /><span class="popup-title-island">'+g[N].title+'</span><span class="popup-type-island">'+langDictionnary["POPUP_MSG_ISLAND_TYPE_"+G.toUpperCase()]+", "+langDictionnary["POPUP_MSG_ISLAND_AREA_"+K.toUpperCase()]+'</span><span class="popup-img-island hiddenDiv">'+(void 0!==g[N].img?g[N].img:"bientot.jpg")+'</span><span class="popup-hasChickens-island hiddenDiv">'+(g[N].hasOwnProperty("chickens")?"O":"N")+'</span><span class="popup-hasPigs-island hiddenDiv">'+(g[N].hasOwnProperty("pigs")?"O":"N")+'</span><span class="popup-hasSnakes-island hiddenDiv">'+(g[N].hasOwnProperty("snakes")?"O":"N")+"</span></div>",{minWidth:322}),W.on("mouseover",function(e){this.openPopup()}),W.on("mouseout",function(e){this.closePopup()}),W.on("click",function(e){O.setView(this.getLatLng(),6);var n=document.getElementById("islandModal"),t=document.getElementById("islandModalImg"),o=document.getElementById("islandModalTitre"),i=document.getElementById("islandModalType"),r=document.getElementsByClassName("closeModal")[0];n.style.display="block",r.onclick=function(){n.style.display="none"},window.onclick=function(e){e.target==n&&(n.style.display="none")},t.src="/images/screenshots/medium/"+document.getElementsByClassName("popup-img-island")[0].innerHTML,o.innerHTML=document.getElementsByClassName("popup-title-island")[0].innerHTML,i.innerHTML=document.getElementsByClassName("popup-type-island")[0].innerHTML,$("#islandModalAnimals").html(""),"O"==document.getElementsByClassName("popup-hasChickens-island")[0].innerHTML&&$("#islandModalAnimals").append('<div class="animal-box"><img src="/images/animal-info-box/chicken-icon-small.png" title="'+langDictionnary.POPUP_MSG_CHICKENS_FOUND_HERE+'" /></div>'),"O"==document.getElementsByClassName("popup-hasPigs-island")[0].innerHTML&&$("#islandModalAnimals").append('<div class="animal-box"><img src="/images/animal-info-box/pig-icon-white.png" height="20" title="'+langDictionnary.POPUP_MSG_PIGS_FOUND_HERE+'" /></div>'),"O"==document.getElementsByClassName("popup-hasSnakes-island")[0].innerHTML&&$("#islandModalAnimals").append('<div class="animal-box"><img src="/images/animal-info-box/snake-icon-white-small.png" title="'+langDictionnary.POPUP_MSG_SNAKES_FOUND_HERE+'" /></div>'),this.closePopup()}),b.addLayer(z),F[N]=z,g[N].circle=z,z.on({mousedown:function(e){v?(e.target.classList.add("pig show"),O.dragging.disable(),O.on("mousemove",function(n){e.target.setLatLng(n.latlng)})):(e.target._path.classList.remove("pig","show"),ue(),ge())},mouseup:function(e){v&&(O.removeEventListener("mousemove"),console.log(e.target.options.title),console.log("["+e.latlng.lat+", "+e.latlng.lng+"],"),O.dragging.enable())}}),g[N].chickens){var Z=me(g[N].loc,.5*H,.6*H);(q=L.marker(Z,{icon:D,title:"chicken"}).addTo(C)).setIcon(D)}if(g[N].snakes)var Y=me(g[N].loc,.5*H,.6*H*-1),q=L.marker(Y,{icon:R,title:"snake"}).addTo(E);if(g[N].pigs){var V=me(g[N].loc,.5*H*-1,.6*H*-1);q=L.marker(V,{icon:M,title:"pigs"}).addTo(j)}}O.on("zoomend",function(){O.getZoom()<4?O.removeLayer(_):O.addLayer(_);var e=$(".title-location");switch(O.getZoom()){case 5:e.css("font-size",24),O.getZoom(),O.getZoom();break;case 6:e.css("font-size",33),O.getZoom(),O.getZoom();break;case 7:e.css("font-size",63),O.getZoom(),O.getZoom();break;default:e.css("font-size",14),O.getZoom()}});var X=new L.LayerGroup;p.push(["beacons",X]);var J=L.icon({iconUrl:"/images/markers/beacon_marker.png",shadowUrl:"/images/markers/beacon_marker.png",iconSize:[31,40],shadowSize:[0,0],iconAnchor:[15,40],shadowAnchor:[0,0],popupAnchor:[-20,-45]});for(var Q in m){var ee=m[Q].loc;q=L.marker(ee,{icon:J,title:"Beacon"}).addTo(X)}var ne=new L.LayerGroup;p.push(["cargoruns",ne]);var te=L.icon({iconUrl:"/images/markers/crate_marker.png",shadowUrl:"/images/markers/crate_marker.png",iconSize:[31,40],shadowSize:[0,0],iconAnchor:[15,40],shadowAnchor:[0,0],popupAnchor:[0,-45]}),oe=[];for(var Q in f)ee=f[Q].loc,q=L.marker(ee,{icon:te,title:"Cargo Run",name:f[Q].title}).addTo(ne).bindPopup(f[Q].title),oe[Q]=q;var ie=new L.LayerGroup;p.push(["thrones",ie]);var re=L.icon({iconUrl:"/images/markers/throne_marker.png",shadowUrl:"/images/markers/throne_marker.png",iconSize:[30,30],shadowSize:[0,0],iconAnchor:[15,30],shadowAnchor:[0,0],popupAnchor:[-20,-45]});for(var Q in h)ee=h[Q].loc,q=L.marker(ee,{icon:re,title:"Skelton Throne"}).addTo(ie).bindPopup(h[Q].desc);var se,ae=L.layerGroup([b]),le=new L.Control.Search({position:"topright",layer:ae,textPlaceholder:langDictionnary.LFL_SEARCH_PLACEMARK,propertyName:"name",initial:!1,zoom:6,marker:!1,buildTip:function(e,n){return'<a href="#" class="'+function(e){var n="island";return oe.forEach(function(t){t.getLatLng().lat==e.lat&&t.getLatLng().lng==e.lng&&(console.log("Cargo Run Destination Found"),n="cargo")}),n}(n)+'">'+e+"</a>"}});O.addControl(le),le.on("search:locationfound",function(e){console.log(e),void 0!==(se=e.layer).setOpacity&&(se.setOpacity(1),se.openPopup())}),le.on("search:collapsed",function(e){void 0!==se&&void 0!==se.setOpacity&&(se.setOpacity(0),se.closePopup())});var ce=L.popup({maxWidth:"500",minWidth:"120",className:"context_popup"});function ue(){y&&O.removeLayer(y)}function pe(e){var n=L.marker(e,{icon:T,draggable:!0}).addTo(O);n.on("dragend",function(e){console.log("marker dragend event"),fe()}),A.push(n)}function de(e){$(".floating_dialog").html(e).addClass("show")}function ge(){$(".floating_dialog").removeClass("show")}function he(){O.getZoom()>=4&&$(".leaflet-grid-label").addClass("big")}function me(e,n,t){return[e[0]+n,e[1]+t]}function fe(){var e=function(){var e,n="";return A.forEach(function(t){e=t.getLatLng().lat+","+t.getLatLng().lng+";",n+=e}),n=window.encodeURIComponent(window.btoa(n))}();updateQueryStringParam("mkrs",e)}O.on("contextmenu",function(e){var n=e.latlng;ce.setLatLng(e.latlng).setContent("<ul><li class='js-addMarker'>"+langDictionnary.CTX_MENU_ADD_MARKER+"</li>        <li class='js-clearMarkers'>"+langDictionnary.CTX_MENU_CLEAR_MARKERS+"</li>        <li class='js-closest' data-type='chickens'>"+langDictionnary.CTX_MENU_CLOSEST_CHICKENS+"</li>        <li class='js-closest' data-type='pigs'>"+langDictionnary.CTX_MENU_CLOSEST_PIGS+"</li>        <li class='js-closest' data-type='snakes'>"+langDictionnary.CTX_MENU_CLOSEST_SNAKES+"</li>        <li class='js-closest' data-type='outpost'>"+langDictionnary.CTX_MENU_CLOSEST_OUTPOST+"</li>        </ul>").openOn(O),$(".js-addMarker").click(function(){pe(n),fe(),O.closePopup()}),$(".js-clearMarkers").click(function(){A.forEach(function(e){O.removeLayer(e)}),A=[],ue(),ge(),fe(),O.closePopup()}),$(".js-closest").click(function(){var t=$(this).data("type"),o=function(e,n){var t,o=1e3,i={};for(var r in g){var s=g[r].title,a=g[r].loc;(t=O.distance(a,e))<o&&g[r][n]&&(o=t,i.title=s,i.islandData=g[r])}return i.bearing=window.angle360(e.lat,e.lng,i.islandData.loc[0],i.islandData.loc[1]),i}(e.latlng,t),i=o.islandData;$(".islandClass").removeClass("show pigs chickens snakes outposts"),i.circle._path.classList.add(t,"show");var r=t.toUpperCase(),s=langDictionnary["POPUP_MSG_NEAREST_"+r];s=u.format(s,window.getCardinalFromDeg(o.bearing),o.title),function(e,n){ue(),y=L.marker(e,{icon:P,draggable:!1}).addTo(O),console.log(y._icon.style);var t=y._icon.style.transform+" rotate("+n+"deg)";console.log(t),y._icon.style.transform=t,A.push(y)}(n,o.bearing),de(s),O.closePopup()})}),L.simpleGraticule({interval:8.2,vinterval:7.7,showOriginLabel:!1,redraw:"move"}).addTo(O),O.on("zoomend",function(){he()}),O.on("move",function(){he()}),O.on("moveend",function(){he()}),window.dev={toggleOn:function(){console.log("dev"),$(".islandClass").addClass("show"),v=!0}};var ye=0;$(function(){var e,n;$(".js-searchforisland").click(function(){var e=function e(n){return"left"==n?--w<0&&(w=g.length-1):++w>=g.length&&(w=0),g[w].isFortress||g[w].outpost||g[w].isSeapost?e(n):g[w]}($(this).data("dir")).loc;O.setView(e,7),he();var n=langDictionnary.POPUP_MSG_ISLAND_X_OF_N;de(n=u.format(n,w+1,g.length)),clearTimeout(ye),ye=setTimeout(ge,3e3)}),$(".js-toggleMarkers").click(function(){var e,n,t;e=$(this).attr("name"),n=$(this).is(":checked"),t=function(e){for(var n=0;n<p.length;n++)if(p[n][0]==e)return p[n][1]}(e),n?O.addLayer(t):O.removeLayer(t)}),$(".js-fullscreen").click(function(){window.toggleFullScreen()}),$(".js-share").click(function(){var e=window.location.href;navigator.clipboard.writeText(e).then(function(){console.log("Async: Copying to clipboard was successful!"),de("Current Map Location URL Copied To Clipboard!"),setTimeout(ge,4e3)},function(e){console.error("Async: Could not copy text: ",e)})}),$(".js-installfiles").click(function(){console.log("click install"),function(){console.log("installer called");var e=new XMLHttpRequest;e.open("GET","data/mapfile_list.json?cb=5",!0),e.onload=function(){if(e.status>=200&&e.status<400){var n=JSON.parse(e.responseText).mapFileList;a=n.length,console.log(n.length),c(n,100)}else console.log("ERROR")},e.onerror=function(){console.log("ERROR")},e.send()}()}),$(".js-settings").click(function(){console.log("click settings"),$(".settings").addClass("open")}),$(".js-close-settings").click(function(){console.log("click settings"),$(".settings").removeClass("open")}),e=new URLSearchParams(window.location.search),n=window.decodeURIComponent(e.get("mkrs")),null!==e.get("mkrs")&&window.atob(n).split(";").forEach(function(e){""!==e&&pe(e.split(","))})})}]);
//# sourceMappingURL=maps/sotm.js.map